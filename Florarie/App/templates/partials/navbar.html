<!-- Top Bar -->
<div id="top-bar" class="bg-gray-100 text-gray-600 text-sm py-6 px-4 flex justify-between items-center fixed top-0 left-0 w-full z-30 transition-all duration-300 ease-in-out">
    <div>ðŸ“ž 0749 122 122 | âœ‰ office@flowerjoy.ro</div>
    <div class="flex gap-3">
        <button class="text-gray-700 text-2xl" id="menu-toggle"></button>
    </div>
</div>
 
 
 <!-- Main Navbar  -->
 <nav id="main-navbar" class="bg-white shadow-md fixed top-0 left-0 w-full z-40 transition-all duration-300 ease-in-out mt-14">
    <div class="container mx-auto flex justify-between items-center py-4 px-32 pr-0">
        <!-- Left Links -->
        <div class="hidden md:flex gap-6 uppercase text-sm font-semibold text-gray-700">
            <a href="{% url 'products_by_category' category='buchete' %}" class="hover:text-gray-900">Buchete</a>
            <a href="{% url 'products_by_category' category='aranjamente' %}" class="hover:text-gray-900">Aranjamente</a>
            <a href="{% url 'products_by_category' category='plante' %}" class="hover:text-gray-900">Plante</a>
            <a href="/auction/" class="hover:text-gray-900">Reduceri</a>
        </div>

        <!-- Logo  -->
        <div id="logo" class="absolute left-1/2 transform -translate-x-1/2 top-4 z-50 transition-all duration-300 ease-in-out -translate-y-7">
            <a href="/" class=" w-32 h-32 bg-black rounded-full flex items-center justify-center shadow-lg">
                <img src="/static/Logo.png" alt="Flower Shop Logo" class="w-28 h-28 rounded-full object-cover transition-all duration-300 ease-in-out" id="logo-img">
            </a>
        </div>

        <!-- Right Links -->
        <div class="flex items-center">
            <div class="hidden md:flex gap-6 uppercase text-sm font-semibold text-gray-700">
                <a href="{% url 'products_by_category' category='Gifts' %}" class="hover:text-gray-900">Cadouri</a>
                <a href="{% url 'contact' %}" class="hover:text-gray-900">Contact</a>
                <a href="{% url 'custom_bouquet_builder' %}" class="hover:text-gray-900">Make your own</a>
                {% if user.is_authenticated and user.is_staff %}
                    <a href="{% url 'admin_dashboard' %}" class="hover:text-gray-900">Admin</a>
                {% endif %}
            </div>
            <div class="flex items-center space-x-4 ml-2">

                <a href="/cart/" id="cart-btn" class="relative">
                    <img src="/static/cartIcon1.png" class="w-8 h-8">
                    {% include "partials/cart_count.html" with cart_count=cart_items.count %}
                    
                </a>
            </div> 

            <div class="flex items-center space-x-4 ml-2">
                {% if user.is_authenticated %}
                    <button type="button" class="text-xl hover:text-gray-700" hx-get="{% url 'logout_confirm' %}" hx-target="#modal-root" hx-swap="innerHTML" aria-label="Logout">
                        <img src="/static/logout.png" class="h-7" alt="Logout">
                    </button>
                    <span class="text-gray-700 text-sm"> <a href="{% url 'profile' %}">{{ user.username }}</a></span>
                {% else %}
                    <a href="/login_page/" class="text-xl hover:text-gray-700"> ðŸ‘¤ </a>
                {% endif %}
            </div>

            <button class="md:hidden text-gray-700 text-2xl" id="menu-toggle">
                â˜°
            </button>
            <div id="mobile-menu" class="hidden md:hidden flex-col gap-4 mt-4">
                <a href="#" class="hover:text-gray-900">Buchete</a>
                <a href="#" class="hover:text-gray-900">Aranjamente</a>
                <a href="#" class="hover:text-gray-900">Plante</a>
                <a href="#" class="hover:text-gray-900">Cadouri</a>
                <a href="#" class="hover:text-gray-900">Despre noi</a>
                <a href="#" class="hover:text-gray-900">Make your own</a>
            </div>
        </div>
    </div>
</nav>

<script>
// Ia elemetele necesare
    const topBar = document.getElementById('top-bar');
    const mainNavbar = document.getElementById('main-navbar');
    const logo = document.getElementById('logo');
    const logoImg = document.getElementById('logo-img');
    
    let lastScrollY = window.scrollY;  // Variabila pentru a stoca ultima pozitie de scroll

    // Listen for scroll event
    window.addEventListener('scroll', function() {
        const currentScrollY = window.scrollY;  // Pozitia curenta de scroll
        const maxScrollY = document.documentElement.scrollHeight - window.innerHeight; // Inaltimea maxima de scroll

        if (currentScrollY > lastScrollY) {
            topBar.classList.add('-top-16');  // Ascunde top bar-ul
            logo.classList.add('scale-75');  // MicsoreazÄƒ logo-ul
            logoImg.classList.add('w-24', 'h-24');  // RedimensioneazÄƒ imaginea
            mainNavbar.classList.remove('mt-14');  // Elimina margin-top de pe navbar pentru a-l lipi de sus
            mainNavbar.classList.add('mt-0');  // navbar-ul sÄƒ se lipeascÄƒ de sus
        } else {
            // lA Scroll IN SUS, daca nu e maxim
            if (currentScrollY > 0) {
                topBar.classList.add('-top-16');  // Ascunde top bar-ul
                mainNavbar.classList.remove('mt-0');  // Pastreaza navbar-ul lipit de sus
            } else {
                //daca scrollul in sus e maxim 
                topBar.classList.remove('-top-16');  // Arata top bar-ul
                logo.classList.remove('scale-75');  // Reseteaza logo 
                logoImg.classList.remove('w-24', 'h-24');  // Reseteaza imaginea
                mainNavbar.classList.add('mt-14');  // Adauga margin-top la navbar
            }
        }

        // Daca e maxim scroll in jos
        if (currentScrollY >= maxScrollY) {
            topBar.classList.add('hidden');  // Ascunde top bar-ul
        } else {
            topBar.classList.remove('hidden');  // Arata top bar-ul
        }

        // Actualizeaza ultima pozitie de scroll
        lastScrollY = currentScrollY;
    });

    
    function updateCartCount() {
        fetch('/cart/count/')
            .then(response => response.json())
            .then(data => {
                document.getElementById('cart-count').innerText = data.count;
            });
    }

    document.addEventListener('DOMContentLoaded', updateCartCount);

    document.getElementById('cart-btn').addEventListener('click', function() {
        document.getElementById('cart-container').classList.remove('translate-x-full');
    });

    document.getElementById('close-cart').addEventListener('click', function() {
        document.getElementById('cart-container').classList.add('translate-x-full');
    });

</script>